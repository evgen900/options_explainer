<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Black-Scholes Interactive</title>

    <!-- ERROR HANDLING & DEBUGGING -->
    <script>
        window.onerror = function (msg, url, line, col, error) {
            // Ignore generic "Script error." (often CORS or extensions)
            if (msg === 'Script error.' && line === 0) {
                console.warn("Ignored cross-origin script error:", msg);
                return false;
            }

            const errorBox = document.getElementById('error-box');
            if (errorBox) {
                errorBox.style.display = 'block';
                errorBox.innerHTML += `<p><strong>Error:</strong> ${msg}<br><small>${url}:${line}:${col}</small></p>`;
                console.error("Global Error:", msg, error);
            }
            return false;
        };
    </script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        call: '#10B981',
                        put: '#EF4444',
                        primary: '#3B82F6',
                        dark: '#1F2937',
                    }
                }
            }
        }
    </script>

    <!-- DEPENDENCIES (CDNJS is often more reliable) -->
    <!-- React -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js" crossorigin></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"
        crossorigin></script>

    <!-- Babel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js" crossorigin></script>

    <!-- Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.js" crossorigin></script>

    <!-- MathJax -->
    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
            svg: { fontCache: 'global' }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f3f4f6;
        }

        #error-box {
            display: none;
            background: #fee2e2;
            color: #991b1b;
            padding: 20px;
            margin: 20px;
            border: 2px solid #ef4444;
            border-radius: 8px;
            font-family: monospace;
        }

        .math-block {
            overflow-x: auto;
            padding: 1rem;
        }
    </style>
</head>

<body>

    <!-- Fallback / Error Display -->
    <div id="error-box">
        <h3 style="font-weight: bold; margin-bottom: 10px;">Startup Errors Detected:</h3>
    </div>

    <!-- Loading Indicator -->
    <div id="loading" class="text-center p-10 text-xl font-bold text-gray-500">
        –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤...<br>
        <span class="text-sm font-normal">–ï—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–π, –≤–æ–∑–º–æ–∂–Ω–æ, –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã CDN (—Å–∫—Ä–∏–ø—Ç—ã).</span>
    </div>

    <!-- MAIN APP ROOT -->
    <div id="root"></div>

    <!-- PRE-FLIGHT CHECK -->
    <script>
        // Check if libraries loaded
        window.onload = function () {
            let missing = [];
            if (typeof React === 'undefined') missing.push("React");
            if (typeof ReactDOM === 'undefined') missing.push("ReactDOM");
            if (typeof Babel === 'undefined') missing.push("Babel");
            if (typeof Chart === 'undefined') missing.push("Chart.js");

            if (missing.length > 0) {
                const err = document.getElementById('error-box');
                err.style.display = 'block';
                err.innerHTML += `<p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∏: <strong>${missing.join(', ')}</strong>.<br>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–æ–∫—Å–∏.</p>`;
            }
        };
    </script>

    <!-- REACT APPLICATION -->
    <script type="text/babel">
        // Remove loading text once script starts
        const loadingDiv = document.getElementById('loading');
        if (loadingDiv) loadingDiv.style.display = 'none';

        const { useState, useEffect, useMemo, useRef } = React;

        // --- MATH UTILITIES ---
        function N(x) {
            var a1 = 0.254829592;
            var a2 = -0.284496736;
            var a3 = 1.421413741;
            var a4 = -1.453152027;
            var a5 = 1.061405429;
            var p = 0.3275911;
            var sign = 1;
            if (x < 0) sign = -1;
            x = Math.abs(x) / Math.sqrt(2.0);
            var t = 1.0 / (1.0 + p * x);
            var y = 1.0 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * Math.exp(-x * x);
            return 0.5 * (1.0 + sign * y);
        }

        function n(x) {
            return (1 / Math.sqrt(2 * Math.PI)) * Math.exp(-0.5 * x * x);
        }

        function calculateBlackScholes(S, K, T, r, sigma, type) {
            if (T <= 0 || sigma <= 0) {
                const val = type === 'call' ? Math.max(S - K, 0) : Math.max(K - S, 0);
                return { price: val, delta: 0, gamma: 0, vega: 0, theta: 0, rho: 0, intrinsic: val, extrinsic: 0 };
            }

            const d1 = (Math.log(S / K) + (r + 0.5 * sigma * sigma) * T) / (sigma * Math.sqrt(T));
            const d2 = d1 - sigma * Math.sqrt(T);

            let price, delta, theta, rho;
            const gamma = n(d1) / (S * sigma * Math.sqrt(T));
            const vega = S * Math.sqrt(T) * n(d1) / 100;

            if (type === 'call') {
                price = S * N(d1) - K * Math.exp(-r * T) * N(d2);
                delta = N(d1);
                theta = (- (S * n(d1) * sigma) / (2 * Math.sqrt(T)) - r * K * Math.exp(-r * T) * N(d2)) / 365;
                rho = (K * T * Math.exp(-r * T) * N(d2)) / 100;
            } else {
                price = K * Math.exp(-r * T) * N(-d2) - S * N(-d1);
                delta = N(d1) - 1;
                theta = (- (S * n(d1) * sigma) / (2 * Math.sqrt(T)) + r * K * Math.exp(-r * T) * N(-d2)) / 365;
                rho = (- K * T * Math.exp(-r * T) * N(-d2)) / 100;
            }

            const intrinsic = type === 'call' ? Math.max(0, S - K) : Math.max(0, K - S);
            const extrinsic = Math.max(0, price - intrinsic);

            return { price, delta, gamma, vega, theta, rho, intrinsic, extrinsic };
        }

        // --- COMPONENTS ---

        const Hero = () => (
            <div className="bg-gradient-to-r from-gray-900 to-gray-800 text-white py-12 px-6 shadow-xl">
                <div className="max-w-4xl mx-auto text-center">
                    <h1 className="text-4xl font-extrabold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-emerald-400">
                        Black-Scholes Interactive
                    </h1>
                    <p className="text-lg text-gray-300">
                        –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è –æ–ø—Ü–∏–æ–Ω–æ–≤.
                    </p>
                </div>
            </div>
        );

        const ResultBox = ({ label, value, color, prefix = '', hint }) => (
            <div className={`p-4 rounded-lg bg-gray-50 border-l-4 ${color} shadow-sm group relative`}>
                <div className="text-xs text-gray-500 uppercase tracking-wide mb-1 flex justify-between">
                    {label}
                </div>
                <div className="text-2xl font-bold text-gray-800 mb-1">{prefix}{typeof value === 'number' ? value.toFixed(2) : value}</div>
                {hint && <div className="text-xs text-gray-400 font-mono">{hint}</div>}
            </div>
        );

        const ControlSlider = ({ label, value, min, max, step, onChange, unit, tooltip }) => (
            <div className="mb-5">
                <div className="flex justify-between items-center mb-1">
                    <label className="text-sm font-semibold text-gray-700">{label}</label>
                    <span className="text-blue-600 font-mono font-bold">{value} {unit}</span>
                </div>
                <input
                    type="range" min={min} max={max} step={step} value={value}
                    onChange={(e) => onChange(parseFloat(e.target.value))}
                    className="w-full h-2 bg-gray-200 rounded-lg cursor-pointer accent-blue-600"
                />
            </div>
        );

        const ChartComponent = ({ data, options }) => {
            const canvasRef = useRef(null);
            const chartRef = useRef(null);

            useEffect(() => {
                if (!canvasRef.current || typeof Chart === 'undefined') return;

                if (chartRef.current) {
                    chartRef.current.destroy();
                }

                const ctx = canvasRef.current.getContext('2d');
                chartRef.current = new Chart(ctx, {
                    type: 'line',
                    data: data,
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: { mode: 'index', intersect: false },
                        plugins: {
                            legend: { display: false },
                            tooltip: { enabled: true }
                        },
                        scales: {
                            x: { grid: { display: false } },
                            y: { grid: { color: '#f3f4f6' } }
                        },
                        ...options
                    }
                });
                return () => { if (chartRef.current) chartRef.current.destroy(); };
            }, [data, options]);

            return <div className="h-64 w-full"><canvas ref={canvasRef} /></div>;
        };

        const OptionLesson = () => (
            <div className="bg-white py-12 px-4 border-t border-gray-200 mt-12 shadow-inner">
                <div className="max-w-4xl mx-auto text-gray-800 leading-relaxed space-y-12">

                    {/* INTRO HEADER */}
                    <div className="text-center mb-12">
                        <h2 className="text-4xl font-bold mb-4 text-gray-900">üìñ –£—Ä–æ–∫: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –û–ø—Ü–∏–æ–Ω—ã?</h2>
                        <p className="text-xl text-gray-600">
                            –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –º–µ—Ö–∞–Ω–∏–∫–∏ –∏ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏ –æ–ø—Ü–∏–æ–Ω–æ–≤.
                        </p>
                    </div>

                    {/* CHAPTER 1: THE CONCEPT */}
                    <section>
                        <h3 className="text-2xl font-bold text-gray-900 mb-4 border-l-4 border-blue-500 pl-4">–ß–∞—Å—Ç—å 1. –ß—Ç–æ —Ç–∞–∫–æ–µ –û–ø—Ü–∏–æ–Ω?</h3>
                        <p className="mb-4">
                            <strong>–û–ø—Ü–∏–æ–Ω</strong> ‚Äî —ç—Ç–æ –¥–æ–≥–æ–≤–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –¥–∞–µ—Ç –≤–∞–º –ø—Ä–∞–≤–æ (–Ω–æ –Ω–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç—å!) –∫—É–ø–∏—Ç—å –∏–ª–∏ –ø—Ä–æ–¥–∞—Ç—å –∞–∫—Ç–∏–≤ –≤ –±—É–¥—É—â–µ–º –ø–æ –∑–∞—Ä–∞–Ω–µ–µ –∏–∑–≤–µ—Å—Ç–Ω–æ–π —Ü–µ–Ω–µ.
                            –≠—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ –∑–∞–¥–∞—Ç–æ–∫ –∏–ª–∏ —Å—Ç—Ä–∞—Ö–æ–≤–∫—É. –í—ã –ø–ª–∞—Ç–∏—Ç–µ –Ω–µ–±–æ–ª—å—à—É—é —Å—É–º–º—É —Å–µ–π—á–∞—Å ("–ø—Ä–µ–º–∏—é"), —á—Ç–æ–±—ã –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤ –±—É–¥—É—â–µ–º.
                        </p>

                        <div className="grid md:grid-cols-2 gap-8 mt-6">
                            <div className="bg-emerald-50 p-6 rounded-lg border border-emerald-200">
                                <h4 className="font-bold text-lg text-emerald-800 mb-2">CALL (–ö–æ–ª–ª) ‚Äî –ò–≥—Ä–∞ –Ω–∞ –ø–æ–≤—ã—à–µ–Ω–∏–µ</h4>
                                <p className="text-sm mb-3">
                                    –í—ã –ø–æ–∫—É–ø–∞–µ—Ç–µ Call, –µ—Å–ª–∏ –¥—É–º–∞–µ—Ç–µ, —á—Ç–æ —Ü–µ–Ω–∞ –∞–∫—Ç–∏–≤–∞ <strong>–≤—ã—Ä–∞—Å—Ç–µ—Ç</strong>.
                                </p>
                                <p className="text-sm italic text-gray-600 bg-white p-3 rounded border border-emerald-100">
                                    "–Ø –ø–ª–∞—á—É 100 —Ä—É–±–ª–µ–π —Å–µ–π—á–∞—Å –∑–∞ –ø—Ä–∞–≤–æ –∫—É–ø–∏—Ç—å –∞–∫—Ü–∏–∏ –ì–∞–∑–ø—Ä–æ–º–∞ –ø–æ 150 —Ä—É–±–ª–µ–π —á–µ—Ä–µ–∑ –º–µ—Å—è—Ü. –î–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∏ –≤–∑–ª–µ—Ç—è—Ç –¥–æ 300, –º–Ω–µ –∏—Ö –ø—Ä–æ–¥–∞–¥—É—Ç –∑–∞ 150."
                                </p>
                            </div>
                            <div className="bg-red-50 p-6 rounded-lg border border-red-200">
                                <h4 className="font-bold text-lg text-red-800 mb-2">PUT (–ü—É—Ç) ‚Äî –ò–≥—Ä–∞ –Ω–∞ –ø–æ–Ω–∏–∂–µ–Ω–∏–µ / –°—Ç—Ä–∞—Ö–æ–≤–∫–∞</h4>
                                <p className="text-sm mb-3">
                                    –í—ã –ø–æ–∫—É–ø–∞–µ—Ç–µ Put, –µ—Å–ª–∏ –¥—É–º–∞–µ—Ç–µ, —á—Ç–æ —Ü–µ–Ω–∞ <strong>—É–ø–∞–¥–µ—Ç</strong>, –∏–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∑–∞—â–∏—Ç–∏—Ç—å —Å–≤–æ–∏ –∞–∫—Ç–∏–≤—ã.
                                </p>
                                <p className="text-sm italic text-gray-600 bg-white p-3 rounded border border-red-100">
                                    "–Ø –ø–ª–∞—á—É 100 —Ä—É–±–ª–µ–π —Å–µ–π—á–∞—Å –∑–∞ –ø—Ä–∞–≤–æ –ø—Ä–æ–¥–∞—Ç—å –∞–∫—Ü–∏–∏ –ø–æ 150 —Ä—É–±–ª–µ–π —á–µ—Ä–µ–∑ –º–µ—Å—è—Ü. –î–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∏ —É–ø–∞–¥—É—Ç –¥–æ 50, —É –º–µ–Ω—è –∏—Ö –∫—É–ø—è—Ç –∑–∞ 150."
                                </p>
                            </div>
                        </div>
                    </section>

                    {/* CHAPTER 2: THE NUMBERS */}
                    <section>
                        <h3 className="text-2xl font-bold text-gray-900 mb-6 border-l-4 border-purple-500 pl-4">–ß–∞—Å—Ç—å 2. –ß—Ç–æ –æ–∑–Ω–∞—á–∞—é—Ç —ç—Ç–∏ —Ü–∏—Ñ—Ä—ã?</h3>
                        <p className="mb-6">–¶–µ–Ω–∞ –æ–ø—Ü–∏–æ–Ω–∞ –Ω–µ –±–µ—Ä–µ—Ç—Å—è —Å –ø–æ—Ç–æ–ª–∫–∞. –û–Ω–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ –ë–ª—ç–∫–∞-–®–æ—É–ª–∑–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ 5 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º –∫–∞–∂–¥—ã–π:</p>

                        <div className="space-y-6">
                            <div className="flex gap-4">
                                <div className="w-16 h-16 flex-shrink-0 bg-blue-100 rounded-full flex items-center justify-center font-bold text-blue-600 text-xl">S</div>
                                <div>
                                    <h4 className="font-bold text-lg">–¶–µ–Ω–∞ –ê–∫—Ç–∏–≤–∞ (Spot Price)</h4>
                                    <p className="text-gray-600">
                                        –¢–µ–∫—É—â–∞—è —Ä—ã–Ω–æ—á–Ω–∞—è —Ü–µ–Ω–∞ –∞–∫—Ü–∏–∏/—Ç–æ–≤–∞—Ä–∞ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å. –≠—Ç–æ –æ—Ç–ø—Ä–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞.
                                        –ï—Å–ª–∏ —Ü–µ–Ω–∞ –∞–∫—Ü–∏–∏ (S) —Ä–∞—Å—Ç–µ—Ç, Call-–æ–ø—Ü–∏–æ–Ω –¥–æ—Ä–æ–∂–∞–µ—Ç (–º—ã –≤—ã–∏–≥—Ä—ã–≤–∞–µ–º), –∞ Put-–æ–ø—Ü–∏–æ–Ω –¥–µ—à–µ–≤–µ–µ—Ç (—Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ –æ—Ç –ø–∞–¥–µ–Ω–∏—è —Ç–µ—Ä—è–µ—Ç —Å–º—ã—Å–ª).
                                    </p>
                                </div>
                            </div>
                            <div className="flex gap-4">
                                <div className="w-16 h-16 flex-shrink-0 bg-purple-100 rounded-full flex items-center justify-center font-bold text-purple-600 text-xl">K</div>
                                <div>
                                    <h4 className="font-bold text-lg">–°—Ç—Ä–∞–π–∫ (Strike Price)</h4>
                                    <p className="text-gray-600">
                                        –¶–µ–Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è. –¢–∞ —Ü–µ–Ω–∞, –æ –∫–æ—Ç–æ—Ä–æ–π –≤—ã –¥–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å. –û–Ω–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ –∏ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è.
                                        <br />–î–ª—è Call: —á–µ–º –Ω–∏–∂–µ Strike, —Ç–µ–º –¥–æ—Ä–æ–∂–µ –æ–ø—Ü–∏–æ–Ω (–∫—Ä—É—Ç–æ –∏–º–µ—Ç—å –ø—Ä–∞–≤–æ –∫—É–ø–∏—Ç—å –¥–µ—à–µ–≤–æ!).
                                        <br />–î–ª—è Put: —á–µ–º –≤—ã—à–µ Strike, —Ç–µ–º –¥–æ—Ä–æ–∂–µ –æ–ø—Ü–∏–æ–Ω (–∫—Ä—É—Ç–æ –∏–º–µ—Ç—å –ø—Ä–∞–≤–æ –ø—Ä–æ–¥–∞—Ç—å –¥–æ—Ä–æ–≥–æ!).
                                    </p>
                                </div>
                            </div>
                            <div className="flex gap-4">
                                <div className="w-16 h-16 flex-shrink-0 bg-orange-100 rounded-full flex items-center justify-center font-bold text-orange-600 text-xl">T</div>
                                <div>
                                    <h4 className="font-bold text-lg">–í—Ä–µ–º—è (Time to Maturity)</h4>
                                    <p className="text-gray-600">
                                        –í—Ä–µ–º—è –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å—Ä–æ–∫–∞ –æ–ø—Ü–∏–æ–Ω–∞ (—ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏). –ò–∑–º–µ—Ä—è–µ—Ç—Å—è –≤ –≥–æ–¥–∞—Ö.
                                        –ß–µ–º –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏, —Ç–µ–º –¥–æ—Ä–æ–∂–µ –æ–ø—Ü–∏–æ–Ω. –ü–æ—á–µ–º—É? –ü–æ—Ç–æ–º—É —á—Ç–æ –∑–∞ –¥–ª–∏–Ω–Ω—ã–π —Å—Ä–æ–∫ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ —á—Ç–æ —É–≥–æ–¥–Ω–æ, –∏ —à–∞–Ω—Å —Ç–æ–≥–æ, —á—Ç–æ —Ü–µ–Ω–∞ —Å–∏–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—Å—è –≤ –≤–∞—à—É –ø–æ–ª—å–∑—É, –≤—ã—à–µ.
                                    </p>
                                </div>
                            </div>
                            <div className="flex gap-4">
                                <div className="w-16 h-16 flex-shrink-0 bg-red-100 rounded-full flex items-center justify-center font-bold text-red-600 text-xl">œÉ</div>
                                <div>
                                    <h4 className="font-bold text-lg">–í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å (Volatility)</h4>
                                    <p className="text-gray-600">
                                        –°–∞–º—ã–π –≤–∞–∂–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–ª—è —Ç—Ä–µ–π–¥–µ—Ä–∞. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ —Å–∏–ª—å–Ω–æ –∏ —Ä–µ–∑–∫–æ –º–µ–Ω—è–µ—Ç—Å—è —Ü–µ–Ω–∞ –∞–∫—Ç–∏–≤–∞.
                                        –û–ø—Ü–∏–æ–Ω—ã –ª—é–±—è—Ç –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å. –í—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å = –≤—ã—Å–æ–∫–∏–µ —Ä–∏—Å–∫–∏ –∏ –≤—ã—Å–æ–∫–∏–µ —à–∞–Ω—Å—ã –Ω–∞ —Å–≤–µ—Ä—Ö–ø—Ä–∏–±—ã–ª—å. –ü–æ—ç—Ç–æ–º—É —Ä–æ—Å—Ç –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ –≤—Å–µ–≥–¥–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ü–µ–Ω—É –æ–ø—Ü–∏–æ–Ω–∞.
                                    </p>
                                </div>
                            </div>
                            <div className="flex gap-4">
                                <div className="w-16 h-16 flex-shrink-0 bg-gray-100 rounded-full flex items-center justify-center font-bold text-gray-600 text-xl">r</div>
                                <div>
                                    <h4 className="font-bold text-lg">–ë–µ–∑—Ä–∏—Å–∫–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞ (Rate)</h4>
                                    <p className="text-gray-600">
                                        –°—Ç–æ–∏–º–æ—Å—Ç—å –¥–µ–Ω–µ–≥ (–æ–±—ã—á–Ω–æ —Å—Ç–∞–≤–∫–∞ –¶–ë). –û–Ω–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ "—Å—Ç–æ–∏–º–æ—Å—Ç—å –≤—Ä–µ–º–µ–Ω–∏".
                                        –í—ã—Å–æ–∫–∞—è —Å—Ç–∞–≤–∫–∞ –¥–µ–ª–∞–µ—Ç Call –æ–ø—Ü–∏–æ–Ω—ã –Ω–µ–º–Ω–æ–≥–æ –¥–æ—Ä–æ–∂–µ (–≤—ã–≥–æ–¥–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å –ø–æ–∫—É–ø–∫—É –∞–∫—Ü–∏–π, –∞ –¥–µ–Ω—å–≥–∏ –ø–æ–¥–µ—Ä–∂–∞—Ç—å –ø–æ–¥ –ø—Ä–æ—Ü–µ–Ω—Ç), –∞ Put –æ–ø—Ü–∏–æ–Ω—ã ‚Äî –¥–µ—à–µ–≤–ª–µ.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </section>

                    {/* CHAPTER 3: THE GREEKS */}
                    <section>
                        <h3 className="text-2xl font-bold text-gray-900 mb-6 border-l-4 border-yellow-500 pl-4">–ß–∞—Å—Ç—å 3. –ì—Ä–µ–∫–∏: –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∏—Å–∫–∞–º–∏</h3>
                        <p className="mb-6">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—ã –Ω–µ —Å–º–æ—Ç—Ä—è—Ç –ø—Ä–æ—Å—Ç–æ –Ω–∞ —Ü–µ–Ω—É. –û–Ω–∏ —Å–º–æ—Ç—Ä—è—Ç –Ω–∞ "–ì—Ä–µ–∫–æ–≤" ‚Äî –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –≥–æ–≤–æ—Ä—è—Ç, –ü–û–ß–ï–ú–£ –º–µ–Ω—è–µ—Ç—Å—è —Ü–µ–Ω–∞.</p>

                        <div className="grid md:grid-cols-2 gap-6">
                            {/* DELTA */}
                            <div className="bg-white p-6 rounded-xl border border-blue-100 shadow-sm hover:shadow-md transition-shadow">
                                <div className="flex items-center gap-3 mb-3">
                                    <span className="bg-blue-100 text-blue-700 p-2 rounded-lg font-bold text-xl">Œî</span>
                                    <h4 className="text-xl font-bold text-gray-800">Delta (–î–µ–ª—å—Ç–∞)</h4>
                                </div>
                                <p className="text-gray-600 mb-4 text-sm">–°–∫–æ—Ä–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–∏—Ç—Å—è –æ–ø—Ü–∏–æ–Ω, –µ—Å–ª–∏ –∞–∫—Ü–∏—è –≤—ã—Ä–∞—Å—Ç–µ—Ç –Ω–∞ $1.</p>

                                <div className="space-y-3">
                                    <div className="bg-blue-50 p-3 rounded text-sm">
                                        <div className="font-semibold text-blue-800 mb-1">–î–∏–∞–ø–∞–∑–æ–Ω –∑–Ω–∞—á–µ–Ω–∏–π:</div>
                                        <ul className="list-disc list-inside text-gray-700">
                                            <li><strong>Call:</strong> –æ—Ç 0 –¥–æ 1 (0% –¥–æ 100%)</li>
                                            <li><strong>Put:</strong> –æ—Ç -1 –¥–æ 0 (-100% –¥–æ 0%)</li>
                                        </ul>
                                    </div>
                                    <div className="border-l-4 border-blue-400 pl-3 py-1">
                                        <div className="text-xs text-gray-400 uppercase font-bold">–ü—Ä–∏–º–µ—Ä –∏–∑ –∂–∏–∑–Ω–∏</div>
                                        <div className="text-sm text-gray-700 mt-1">
                                            <div>–î–µ–ª—å—Ç–∞ = <strong>0.5</strong>. –ê–∫—Ü–∏—è –≤—ã—Ä–æ—Å–ª–∞ –Ω–∞ <strong>$2</strong>.</div>
                                            <div className="mt-1">–¶–µ–Ω–∞ –æ–ø—Ü–∏–æ–Ω–∞ –≤—ã—Ä–∞—Å—Ç–µ—Ç –Ω–∞: $2 * 0.5 = <strong>$1</strong>.</div>
                                        </div>
                                    </div>
                                    <div className="text-xs text-gray-500 italic">
                                        üí° ATM –æ–ø—Ü–∏–æ–Ω—ã (–Ω–∞ –¥–µ–Ω—å–≥–∞—Ö) –æ–±—ã—á–Ω–æ –∏–º–µ—é—Ç –¥–µ–ª—å—Ç—É ~0.5.
                                    </div>
                                </div>
                            </div>

                            {/* GAMMA */}
                            <div className="bg-white p-6 rounded-xl border border-purple-100 shadow-sm hover:shadow-md transition-shadow">
                                <div className="flex items-center gap-3 mb-3">
                                    <span className="bg-purple-100 text-purple-700 p-2 rounded-lg font-bold text-xl">Œì</span>
                                    <h4 className="text-xl font-bold text-gray-800">Gamma (–ì–∞–º–º–∞)</h4>
                                </div>
                                <p className="text-gray-600 mb-4 text-sm">–£—Å–∫–æ—Ä–µ–Ω–∏–µ –î–µ–ª—å—Ç—ã. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –±—ã—Å—Ç—Ä–æ –º–µ–Ω—è–µ—Ç—Å—è —Å–∞–º–∞ –î–µ–ª—å—Ç–∞ –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ —Ü–µ–Ω—ã.</p>

                                <div className="space-y-3">
                                    <div className="bg-purple-50 p-3 rounded text-sm">
                                        <div className="font-semibold text-purple-800 mb-1">–ß—Ç–æ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å:</div>
                                        <p className="text-gray-700">–ì–∞–º–º–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ —É ATM –æ–ø—Ü–∏–æ–Ω–æ–≤ (–∫–æ–≥–¥–∞ —Ü–µ–Ω–∞ = —Å—Ç—Ä–∞–π–∫) –∏ –ø–µ—Ä–µ–¥ —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–µ–π.</p>
                                    </div>
                                    <div className="border-l-4 border-purple-400 pl-3 py-1">
                                        <div className="text-xs text-gray-400 uppercase font-bold">–û–ø–∞—Å–Ω–æ—Å—Ç—å</div>
                                        <p className="text-sm text-gray-700 mt-1">
                                            –í—ã—Å–æ–∫–∞—è –ì–∞–º–º–∞ = –†–∏—Å–∫. –î–µ–ª—å—Ç–∞ –º–æ–∂–µ—Ç —Ä–µ–∑–∫–æ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å—Å—è –∏–∑ 0.5 –≤ 1.0 (–∏–ª–∏ 0), –∏ –≤–∞—à–∞ –ø–æ–∑–∏—Ü–∏—è —Å—Ç–∞–Ω–µ—Ç –Ω–µ—É–ø—Ä–∞–≤–ª—è–µ–º–æ–π.
                                        </p>
                                    </div>
                                </div>
                            </div>

                            {/* THETA */}
                            <div className="bg-white p-6 rounded-xl border border-red-100 shadow-sm hover:shadow-md transition-shadow">
                                <div className="flex items-center gap-3 mb-3">
                                    <span className="bg-red-100 text-red-700 p-2 rounded-lg font-bold text-xl">Œò</span>
                                    <h4 className="text-xl font-bold text-gray-800">Theta (–¢–µ—Ç–∞)</h4>
                                </div>
                                <p className="text-gray-600 mb-4 text-sm">–í—Ä–µ–º–µ–Ω–Ω–æ–π —Ä–∞—Å–ø–∞–¥. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ç–µ—Ä—è–µ—Ç –æ–ø—Ü–∏–æ–Ω <strong>–∫–∞–∂–¥—ã–π –¥–µ–Ω—å</strong>.</p>

                                <div className="space-y-3">
                                    <div className="bg-red-50 p-3 rounded text-sm">
                                        <div className="font-semibold text-red-800 mb-1">–ü—Ä–∞–≤–∏–ª–æ:</div>
                                        <p className="text-gray-700">–¢–µ—Ç–∞ –≤—Å–µ–≥–¥–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞ –¥–ª—è –ø–æ–∫—É–ø–∞—Ç–µ–ª—è –æ–ø—Ü–∏–æ–Ω–æ–≤. –í—Ä–µ–º—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–æ—Ç–∏–≤ –≤–∞—Å.</p>
                                    </div>
                                    <div className="border-l-4 border-red-400 pl-3 py-1">
                                        <div className="text-xs text-gray-400 uppercase font-bold">–ü—Ä–∏–º–µ—Ä</div>
                                        <div className="text-sm text-gray-700 mt-1">
                                            <div>–¢–µ—Ç–∞ = <strong>-0.05</strong>. –¶–µ–Ω–∞ –æ–ø—Ü–∏–æ–Ω–∞ = $2.00.</div>
                                            <div className="mt-1">–ï—Å–ª–∏ —Ü–µ–Ω–∞ –∞–∫—Ü–∏–∏ –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è, –∑–∞–≤—Ç—Ä–∞ –æ–ø—Ü–∏–æ–Ω –±—É–¥–µ—Ç —Å—Ç–æ–∏—Ç—å: $2.00 - 0.05 = <strong>$1.95</strong>.</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* VEGA */}
                            <div className="bg-white p-6 rounded-xl border border-orange-100 shadow-sm hover:shadow-md transition-shadow">
                                <div className="flex items-center gap-3 mb-3">
                                    <span className="bg-orange-100 text-orange-700 p-2 rounded-lg font-bold text-xl">ŒΩ</span>
                                    <h4 className="text-xl font-bold text-gray-800">Vega (–í–µ–≥–∞)</h4>
                                </div>
                                <p className="text-gray-600 mb-4 text-sm">–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ –ø–∞–Ω–∏–∫–∏. –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—Å—è —Ü–µ–Ω–∞ –ø—Ä–∏ —Ä–æ—Å—Ç–µ IV –Ω–∞ 1%.</p>

                                <div className="space-y-3">
                                    <div className="bg-orange-50 p-3 rounded text-sm">
                                        <div className="font-semibold text-orange-800 mb-1">–ò–Ω—Å–∞–π—Ç:</div>
                                        <p className="text-gray-700">–í–µ–≥–∞ –≤—ã—à–µ –≤—Å–µ–≥–æ —É "–¥–ª–∏–Ω–Ω—ã—Ö" –æ–ø—Ü–∏–æ–Ω–æ–≤ (–±–æ–ª—å—à–æ–µ –≤—Ä–µ–º—è T). –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ –æ–ø—Ü–∏–æ–Ω—ã –ø–æ—á—Ç–∏ –Ω–µ —Ä–µ–∞–≥–∏—Ä—É—é—Ç –Ω–∞ –í–µ–≥—É.</p>
                                    </div>
                                    <div className="border-l-4 border-orange-400 pl-3 py-1">
                                        <div className="text-xs text-gray-400 uppercase font-bold">–ü—Ä–∏–º–µ—Ä</div>
                                        <div className="text-sm text-gray-700 mt-1">
                                            <div>–í–µ–≥–∞ = <strong>0.10</strong>. –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å –≤—ã—Ä–æ—Å–ª–∞ —Å 20% –¥–æ 21%.</div>
                                            <div className="mt-1">–¶–µ–Ω–∞ –æ–ø—Ü–∏–æ–Ω–∞ —Å—Ä–∞–∑—É –≤—ã—Ä–∞—Å—Ç–µ—Ç –Ω–∞ <strong>$0.10</strong> (–ø—Ä–æ—Å—Ç–æ –Ω–∞ –Ω–æ–≤–æ—Å—Ç—è—Ö, –±–µ–∑ –¥–≤–∏–∂–µ–Ω–∏—è —Ü–µ–Ω—ã –∞–∫—Ü–∏–∏!).</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                </div>
            </div>
        );

        const MainApp = () => {
            const [params, setParams] = useState({
                S: 100, K: 100, T: 1, r: 5, sigma: 20, type: 'call'
            });

            // Trigger MathJax typeset safely
            useEffect(() => {
                if (window.MathJax && window.MathJax.typesetPromise) {
                    window.MathJax.typesetPromise();
                }
            }, [params.type]);

            const results = useMemo(() => {
                return calculateBlackScholes(params.S, params.K, params.T, params.r / 100, params.sigma / 100, params.type);
            }, [params]);

            const chartsData = useMemo(() => {
                const rangePercent = 0.5;
                const steps = 50;

                // Spot Arrays
                const minS = params.S * (1 - rangePercent);
                const maxS = params.S * (1 + rangePercent);
                const stepS = (maxS - minS) / steps;

                const sLabels = [];
                const priceData = [];
                const payoffData = [];
                const deltaData = [];

                for (let i = 0; i <= steps; i++) {
                    const currentS = minS + i * stepS;
                    sLabels.push(currentS.toFixed(1));
                    const res = calculateBlackScholes(currentS, params.K, params.T, params.r / 100, params.sigma / 100, params.type);
                    priceData.push(res.price);
                    deltaData.push(res.delta);
                    const intrinsic = params.type === 'call' ? Math.max(0, currentS - params.K) : Math.max(0, params.K - currentS);
                    payoffData.push(intrinsic);
                }

                // Time Arrays
                const tLabels = [];
                const tPriceData = [];
                const tThetaData = [];
                for (let i = 0; i <= steps; i++) {
                    // Time Passed (X axis)
                    const timePassed = params.T * (i / steps);
                    // Remaining Time decreasing
                    const remainingT = Math.max(0.001, params.T - timePassed);

                    tLabels.push(remainingT.toFixed(2));
                    const res = calculateBlackScholes(params.S, params.K, remainingT, params.r / 100, params.sigma / 100, params.type);
                    tPriceData.push(res.price);
                    tThetaData.push(res.theta);
                }

                return {
                    spot: {
                        labels: sLabels,
                        datasets: [
                            { label: '–¶–µ–Ω–∞', data: priceData, borderColor: params.type === 'call' ? '#10B981' : '#EF4444', borderWidth: 3, fill: false, pointRadius: 0 },
                            { label: '–í—ã–ø–ª–∞—Ç–∞', data: payoffData, borderColor: '#ccc', borderDash: [5, 5], borderWidth: 2, fill: false, pointRadius: 0 }
                        ]
                    },
                    delta: {
                        labels: sLabels,
                        datasets: [{ label: '–î–µ–ª—å—Ç–∞', data: deltaData, borderColor: '#3B82F6', borderWidth: 2, fill: false, pointRadius: 0 }]
                    },
                    timePrice: {
                        labels: tLabels,
                        datasets: [{ label: '–†–∞—Å–ø–∞–¥ –¶–µ–Ω—ã', data: tPriceData, borderColor: '#8B5CF6', borderWidth: 2, fill: false, pointRadius: 0 }]
                    },
                    timeTheta: {
                        labels: tLabels,
                        datasets: [{ label: '–†–∞—Å–ø–∞–¥ –¢–µ—Ç—ã', data: tThetaData, borderColor: '#EC4899', borderWidth: 2, fill: false, pointRadius: 0 }]
                    }
                };
            }, [params, results]);

            return (
                <div className="min-h-screen">
                    <Hero />

                    <div className="bg-white py-8 border-b shadow-sm">
                        <div className="max-w-6xl mx-auto px-4 text-center">

                            {/* FORMULA BLOCK */}
                            <div className={`rounded-xl p-6 transition-all duration-500 transform ${params.type === 'call' ? 'bg-emerald-50 border-2 border-emerald-100' : 'bg-red-50 border-2 border-red-100'}`}>
                                <div className="text-center mb-4">
                                    <span className={`inline-block px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider transition-colors ${params.type === 'call' ? 'bg-emerald-200 text-emerald-800' : 'bg-red-200 text-red-800'}`}>
                                        {params.type === 'call' ? '–§–æ—Ä–º—É–ª–∞ Call (–ü–æ–∫—É–ø–∫–∞)' : '–§–æ—Ä–º—É–ª–∞ Put (–ü—Ä–æ–¥–∞–∂–∞)'}
                                    </span>
                                </div>

                                <div className="overflow-x-auto mb-6">
                                    <p key={params.type} className="text-3xl font-serif text-gray-900 text-center">
                                        $$ {params.type === 'call' ? 'C = S N(d_1) - K e^{-rT} N(d_2)' : 'P = K e^{-rT} N(-d_2) - S N(-d_1)'} $$
                                    </p>
                                </div>

                                <div className="text-center text-sm text-gray-700 bg-white/60 p-4 rounded-lg mx-auto max-w-2xl backdrop-blur-sm">
                                    {params.type === 'call' ? (
                                        <p><strong>Call:</strong> –¶–µ–Ω–∞ = (–¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ –∞–∫—Ç–∏–≤–∞ √ó –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å) <strong>–º–∏–Ω—É—Å</strong> (–¶–µ–Ω–∞ —Å—Ç—Ä–∞–π–∫ √ó –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å).</p>
                                    ) : (
                                        <p><strong>Put:</strong> –¶–µ–Ω–∞ = (–¶–µ–Ω–∞ —Å—Ç—Ä–∞–π–∫ √ó –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å) <strong>–º–∏–Ω—É—Å</strong> (–¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ –∞–∫—Ç–∏–≤–∞ √ó –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å). <br />–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è <span className="font-mono font-bold text-red-600 bg-red-100 px-1 rounded">-d</span> (–º–∏–Ω—É—Å d), —Ç–∞–∫ –∫–∞–∫ –≤—Å—ë –∑–µ—Ä–∫–∞–ª—å–Ω–æ.</p>
                                    )}
                                </div>

                                <div className="flex flex-col md:flex-row justify-center items-center gap-8 text-lg text-gray-600 border-t border-gray-200/50 pt-6 mt-6">
                                    <p>{String.raw`$$ d_1 = \frac{\ln(S/K) + (r + \frac{\sigma^2}{2})T}{\sigma\sqrt{T}} $$`}</p>
                                    <p>{String.raw`$$ d_2 = d_1 - \sigma\sqrt{T} $$`}</p>
                                </div>
                                <div className="text-center mt-4">
                                    <p className="text-gray-600 text-lg">{String.raw`$$ N(x) = \frac{1}{\sqrt{2\pi}} \int_{-\infty}^{x} e^{-\frac{t^2}{2}} dt $$`}</p>
                                </div>
                            </div>

                            <div className="flex justify-center mt-8">
                                <div className="bg-gray-100 rounded-lg p-1 flex">
                                    <button onClick={() => setParams({ ...params, type: 'call' })} className={`px-6 py-2 rounded-md font-bold transition-all ${params.type === 'call' ? 'bg-white shadow text-green-600' : 'text-gray-500 hover:text-gray-900'}`}>CALL</button>
                                    <button onClick={() => setParams({ ...params, type: 'put' })} className={`px-6 py-2 rounded-md font-bold transition-all ${params.type === 'put' ? 'bg-white shadow text-red-600' : 'text-gray-500 hover:text-gray-900'}`}>PUT</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="max-w-7xl mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-12 gap-8">

                        {/* CONTROLS */}
                        <div className="lg:col-span-4 space-y-6">
                            <div className="bg-white p-6 rounded-xl shadow-md border border-gray-100">
                                <h2 className="text-xl font-bold mb-4">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã</h2>
                                <ControlSlider label="–¶–µ–Ω–∞ –ê–∫—Ç–∏–≤–∞ (S)" value={params.S} min={10} max={300} step={1} unit="$" onChange={v => setParams({ ...params, S: v })} />
                                <ControlSlider label="Strike –¶–µ–Ω–∞ (K)" value={params.K} min={10} max={300} step={1} unit="$" onChange={v => setParams({ ...params, K: v })} />
                                <ControlSlider label="–í—Ä–µ–º—è (T, –ª–µ—Ç)" value={params.T} min={0.01} max={5} step={0.01} unit="–≥" onChange={v => setParams({ ...params, T: v })} />
                                <ControlSlider label="–í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å (œÉ)" value={params.sigma} min={1} max={200} step={1} unit="%" onChange={v => setParams({ ...params, sigma: v })} />
                                <ControlSlider label="–°—Ç–∞–≤–∫–∞ (r)" value={params.r} min={0} max={20} step={0.1} unit="%" onChange={v => setParams({ ...params, r: v })} />
                            </div>

                            <div className="bg-white p-6 rounded-xl shadow-md border border-gray-100">
                                <h3 className="font-bold text-gray-700 mb-2">Greeks (–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)</h3>
                                <div className="grid grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <div className="text-gray-500">Delta (Œî)</div>
                                        <div className="font-mono font-bold text-lg">{results.delta.toFixed(4)}</div>
                                    </div>
                                    <div>
                                        <div className="text-gray-500">Gamma (Œì)</div>
                                        <div className="font-mono font-bold text-lg">{results.gamma.toFixed(4)}</div>
                                    </div>
                                    <div>
                                        <div className="text-gray-500">Vega (ŒΩ)</div>
                                        <div className="font-mono font-bold text-lg">{results.vega.toFixed(4)}</div>
                                    </div>
                                    <div>
                                        <div className="text-gray-500">Theta (Œò)</div>
                                        <div className="font-mono font-bold text-lg text-red-500">{results.theta.toFixed(4)}</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* RESULTS */}
                        <div className="lg:col-span-8 space-y-6">
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div className={`p-6 rounded-xl shadow-md text-white ${params.type === 'call' ? 'bg-green-500' : 'bg-red-500'}`}>
                                    <div className="text-white/80 text-sm font-bold uppercase">–¶–µ–Ω–∞ –û–ø—Ü–∏–æ–Ω–∞</div>
                                    <div className="text-4xl font-extrabold">${results.price.toFixed(2)}</div>
                                    <div className="text-xs text-white/60 mt-2 font-mono">Intrinsic + Extrinsic</div>
                                </div>
                                <ResultBox
                                    label="Intrinsic (–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è)"
                                    value={results.intrinsic}
                                    color="border-blue-500"
                                    prefix="$"
                                    hint={params.type === 'call' ? 'Max(0, S - K)' : 'Max(0, K - S)'}
                                />
                                <ResultBox
                                    label="Extrinsic (–í—Ä–µ–º–µ–Ω–Ω–∞—è)"
                                    value={results.extrinsic}
                                    color="border-purple-500"
                                    prefix="$"
                                    hint="Price - Intrinsic"
                                />
                            </div>

                            <div className="bg-white p-4 rounded-xl shadow-md">
                                <h3 className="font-bold mb-2 text-center">–¶–µ–Ω–∞ –∏ –í—ã–ø–ª–∞—Ç–∞ vs –¶–µ–Ω–∞ –ê–∫—Ç–∏–≤–∞</h3>
                                <ChartComponent data={chartsData.spot} options={{ scales: { x: { title: { display: true, text: '–¶–µ–Ω–∞ –ê–∫—Ç–∏–≤–∞ (S)' } } } }} />
                            </div>

                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div className="bg-white p-4 rounded-xl shadow-md">
                                    <h3 className="font-bold mb-2 text-center">–î–µ–ª—å—Ç–∞ vs S</h3>
                                    <ChartComponent data={chartsData.delta} options={{ scales: { x: { title: { display: true, text: '–¶–µ–Ω–∞ –ê–∫—Ç–∏–≤–∞ (S)' } } } }} />
                                </div>
                                <div className="bg-white p-4 rounded-xl shadow-md">
                                    <h3 className="font-bold mb-2 text-center">–í—Ä–µ–º–µ–Ω–Ω–æ–π –†–∞—Å–ø–∞–¥ (–¶–µ–Ω–∞)</h3>
                                    <ChartComponent data={chartsData.timePrice} options={{ scales: { x: { title: { display: true, text: '–û—Å—Ç–∞–ª–æ—Å—å –í—Ä–µ–º–µ–Ω–∏ (–ª–µ—Ç)' } } } }} />
                                </div>
                            </div>
                        </div>
                    </div>

                    <OptionLesson />

                    <footer className="bg-gray-800 text-gray-400 py-8 text-center mt-0">
                        <p>¬© 2026 Black-Scholes Interactive Model.</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<MainApp />);
    </script>
</body>

</html>